<div style="margin-bottom: 20px;">
  <%= link_to '← Back to Admin Menu', admin_root_path, style: 'color: #3498db; text-decoration: none;' %>
</div>

<h1>Task Types - Database View</h1>

<p>
  <%= link_to '← Back to Task Types', admin_task_types_path, class: 'button' %>
</p>

<div style="overflow-x: auto;">
  <table class="database-view-table">
    <thead>
      <tr>
        <% @columns.each do |column| %>
          <th><%= column %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @task_types.each do |task_type| %>
        <tr>
          <% @columns.each do |column| %>
            <td>
              <% value = task_type.send(column) %>
              <% if value.nil? %>
                <span class="null-value">NULL</span>
              <% elsif value.is_a?(Array) || value.is_a?(Hash) %>
                <pre class="json-value"><%= JSON.pretty_generate(value) %></pre>
              <% elsif value.is_a?(Time) || value.is_a?(DateTime) %>
                <%= value.strftime('%Y-%m-%d %H:%M:%S') %>
              <% else %>
                <%= value %>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% if @task_types.empty? %>
  <p style="text-align: center; color: #999; margin-top: 40px;">No records found in task_types table.</p>
<% end %>

<style>
  .database-view-table {
    font-size: 13px;
    white-space: nowrap;
  }
  
  .database-view-table th {
    background-color: #2c3e50;
    position: sticky;
    top: 0;
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.5px;
  }
  
  .database-view-table td {
    font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
    padding: 8px 12px;
    max-width: 300px;
  }
  
  .null-value {
    color: #999;
    font-style: italic;
  }
  
  .json-value {
    background-color: #f8f8f8;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #e0e0e0;
    margin: 0;
    font-size: 11px;
    max-width: 300px;
    overflow-x: auto;
    white-space: pre-wrap;
  }
  
  .database-view-table tr:nth-child(even) {
    background-color: #f9f9f9;
  }
  
  .database-view-table tr:hover {
    background-color: #e8f4f8;
  }
</style>
